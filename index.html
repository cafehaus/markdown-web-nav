<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>cafehaus</title>
  <!-- Vue3 -->
  <script src="https://unpkg.com/vue@3"></script>
  <!-- Vue Router -->
  <script src="https://unpkg.com/vue-router@4"></script>
  <!-- element-ui æ ·å¼ -->
  <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
  <!-- element-ui ç»„ä»¶åº“ -->
  <script src="https://unpkg.com/element-plus"></script>
  <!-- element-ui å›¾æ ‡ -->
  <script src="https://unpkg.com/@element-plus/icons-vue"></script>
  <!-- å…±äº«æ¨¡å— -->
<script src="libs/shared.js"></script>
</head>

<body>
  <div id="app">
    <el-container class="layout">
      <!-- <el-aside width="200px">
        <el-scrollbar>
          <el-menu router :default-active="defaultMenuActive">
            <template v-for="(item, index) in menuList" :key="index">
              <template v-if="!item.children || !item.children.length">
                <el-menu-item :index="item.path" :route="item.path">
                  <el-icon v-if="item.icon"><component :is="item.icon"></component></el-icon>
                  <template #title>{{ item.title }}</template>
                </el-menu-item>
              </template>
              <template v-else>
                <el-sub-menu :index="index + ''">
                  <template #title>
                    <el-icon v-if="item.icon"><component :is="item.icon"></component></el-icon>{{ item.title }}
                  </template>
                  <el-menu-item-group>
                    <template v-for="(itm, idx) in item.children" :key="idx">
                      <el-menu-item :index="itm.path" :route="itm.path">
                        <template #title>{{ itm.title }}</template>
                      </el-menu-item>
                    </template>
                  </el-menu-item-group>
                </el-sub-menu>
              </template>
            </template>
          </el-menu>
        </el-scrollbar>
      </el-aside> -->

      <el-container>
        <el-header>
          <span style="cursor: pointer;font-size: 15px;font-weight: bold;color: #666;" @click="handleNavigate('/')">ğŸŒ ç”¨ Markdown è¯­æ³•åœ¨æ–‡æ¡£ç±»å¹³å°é¡µé¢ä¸­åˆ¶ä½œç½‘å€å¯¼èˆª</span>
          <div style="display: flex;align-items: center;color: #999;">
            <span style="display: flex;align-items: center;margin-left:20px;">
              <el-icon><notebook /></el-icon>
              <el-button
                type="text"
                style="color: #999;font-weight: normal;margin-left: 4px;"
                @click="handleNavigate('/readme')"
              >ä½¿ç”¨æ•™ç¨‹</el-button>
            </span>
            <span style="display: flex;align-items: center;margin-left: 20px;">
              <el-icon><chat-dot-round /></el-icon>
              <el-button
                type="text"
                style="color: #999;font-weight: normal;margin-left: 4px;"
                @click="handleNavigate('https://github.com/cafehaus/markdown-web-nav/issues')"
              >é—®é¢˜åé¦ˆ</el-button>
            </span>
            </div>
        </el-header>

        <el-main>
          <el-scrollbar>
            <router-view></router-view>
          </el-scrollbar>
        </el-main>
      </el-container>
    </el-container>
  </div>
</body>
</html>

<script>
  // ç¡®ä¿ window.MarkdownWebNav å·²ç»åŠ è½½
  if (typeof window === 'undefined' || !window.MarkdownWebNav) {
    console.error('window.MarkdownWebNav æœªå®šä¹‰ï¼Œè¯·ç¡®ä¿ libs/shared.js å·²æ­£ç¡®åŠ è½½');
    // åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„ MarkdownWebNav å¯¹è±¡ï¼Œé˜²æ­¢é¡µé¢å´©æºƒ
    if (typeof window !== 'undefined') {
      window.MarkdownWebNav = {
        demoTreeData: [],
        generateColor: () => '#E6A23C',
        generateMarkdown: () => '',
        fmtJsonData: (item) => item
      };
    }
  }

  // 1. åˆ›å»º vue å®ä¾‹
  const { } = window.MarkdownWebNav;
  const app = Vue.createApp({
    data() {
      return {
        menuList: [
          { title: 'é¦–é¡µ', icon: 'home-filled', path: '/home' },
          {
            title: 'ä½¿ç”¨æ•™ç¨‹',
            icon: 'management',
            path: '/readme'
            // children: [
            //   { title: 'å•†å“', path: '/goods' },
            //   { title: 'ä»‹ç»', path: '/about' },
            // ]
          }
        ],
      }
    },
    computed: {
      defaultMenuActive() {
        const { meta, path } = this.$route
        if (meta.activeMenu) {
          return meta.activeMenu
        }
        return path
      },
    },
    methods: {
      handleNavigate(path) {
        if (path.startsWith('http')) {
          window.open(path)
          return
        }
        this.$router.push({
          path
        })
      },
    }
  })

  // 2.1 åˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶å¯¹è±¡
  const Home = {
    template: `
      <div>
        <el-button type="primary" plain size="small" @click="handleAppend(1)">æ–°å¢å¯¼èˆªåˆ†ç±»</el-button>
        <el-button type="info" plain size="small" @click="showUploadDialog = true; this.jsonTextarea= ''">ä¸Šä¼ jsonç½‘å€æ•°æ®</el-button>
        <el-button type="info" plain size="small" @click="downloadJsonTemplate">ä¸‹è½½jsonç¤ºä¾‹æ¨¡æ¿</el-button>
        <el-popover width="260" v-if="historyList.length">
          <template #reference>
            <el-button type="info" plain size="small">ä¿®æ”¹å†å²</el-button>
          </template>
          <div style="max-height: 200px;overflow-y: auto;">
            <p
              style="cursor: pointer;"
              v-for="(item, index) in historyList"
              :key="index"
              @click="handlePickHistory(item)"
            >
              <span>ä¿®æ”¹æ—¶é—´ï¼š{{ formatDate(item.date) }}</span>
            </p>
          </div>
        </el-popover>
        <el-button type="info" plain size="small" @click="reset">é‡ç½®æˆç¤ºä¾‹æ•°æ®</el-button>

        <div style="margin: 10px 0 0;display: flex;">
          <div style="background: #FFF;padding: 20px;flex: 1;">
            <el-tree
              :data="treeData"
              :show-checkbox="false"
              draggable
              node-key="id"
              default-expand-all
              :expand-on-click-node="false"
            >
              <template #default="{ node, data }">
                <div style="flex: 1;display: flex;justify-content: space-between;">
                  <span>
                    {{ node.label }}
                  </span>
                  <span>
                    <el-icon
                      v-if="!node.isLeaf"
                      style="margin-left: 8px;color: var(--el-color-info-light-5)"
                      title="å¤åˆ¶"
                      @click="handleCopy(1, node, data)"
                    >
                      <copy-document/>
                    </el-icon>
                    <el-icon
                      v-if="!node.isLeaf"
                      style="margin-left: 8px;color: var(--el-color-primary);"
                      title="ç¼–è¾‘"
                      @click="handleEdit(data)"
                    >
                      <edit-pen />
                    </el-icon>
                    <el-icon
                      v-if="!node.isLeaf"
                      style="margin-left: 8px;color: var(--el-color-primary)"
                      title="æ–°å¢"
                      @click="handleAppend(3, data)"
                    >
                      <circle-plus/> 
                    </el-icon>

                    <el-icon
                      v-if="node.isLeaf"
                      style="margin-left: 8px;color: var(--el-color-info-light-5)"
                      title="å¤åˆ¶"
                      @click="handleCopy(2, node, data)"
                    >
                      <copy-document/>
                    </el-icon>
                    <el-icon
                      v-if="node.isLeaf"
                      style="margin-left: 8px;color: var(--el-color-primary);"
                      @click="handleEdit(data)"
                    >
                      <edit-pen />
                    </el-icon>
                    <el-popconfirm
                      confirm-button-text="ç¡®å®š"
                      cancel-button-text="å–æ¶ˆ"
                      icon="WarningFilled"
                      icon-color="#E6A23C"
                      title="ç¡®å®šè¦åˆ é™¤å—?"
                      @confirm="remove(node, data)"
                    >
                      <template #reference>
                        <el-icon style="margin-left: 8px;color: var(--el-color-danger)">
                          <remove />
                        </el-icon>
                      </template>
                    </el-popconfirm>
                  </span>
                </div>
              </template>
            </el-tree>
          </div>

          <el-card v-if="treeData && treeData.length" header="é¢„è§ˆæ•ˆæœ" style="width: 70%;margin-left: 20px;">
            <template #header>
              <div style="display: flex;justify-content: space-between;">
                <span>é¢„è§ˆæ•ˆæœ</span>
                <div>
                  <el-button
                    type="success"
                    :disabled="!treeData || !treeData.length"
                    plain
                    size="small"
                    @click="copyMarkdown"
                  >
                    å¤åˆ¶markdownæ•°æ®
                  </el-button>
                  <el-button
                    type="info"
                    plain
                    :disabled="!treeData || !treeData.length"
                    size="small"
                    @click="exportMarkdown"
                  >
                    å¯¼å‡ºmarkdown
                  </el-button>
                  <el-button
                    type="info"
                    plain
                    :disabled="!treeData || !treeData.length"
                    size="small"
                    @click="exportJson"
                  >
                    å¯¼å‡ºjson
                  </el-button>
                </div>
              </div>
            </template>

            <!-- ç½‘å€å¯¼èˆªä»£ç  -->
            <template
              v-for="(item, index) in treeData"
              :key="index"
            >
              <h3>{{ item.title || 'æœªè®¾ç½®å¯¼èˆªåˆ†ç±»æ ‡é¢˜' }}</h3>
              <div style="display: flex;align-items: center;flex-wrap: wrap;margin-right: 20px;">
                <a
                  v-for="(itm, idx) in item.children"
                  :key="idx"
                  :href="itm.url"
                  target="_blank"
                  :title="itm.url"
                  style="display: flex;align-items: center;margin: 0 20px 20px 0;padding: 20px;border-radius: 10px;border: 1px solid #EEE;width:250px;
text-decoration: none;"
                >
                  <img v-if="itm.icon" :src="itm.icon" style="width:36px;height:36px;border-radius:50%;object-fit:cover;margin-right:8px;" />
                  <div v-else :style="'width:36px;height:36px;border-radius:50%;text-align: center;line-height:36px;margin-right:8px;background:' + generateColor() + ';color: #FFF;'">{{ itm.name ? itm.name[0] : 'ç©º' }}</div>
                  <div style="overflow:hidden;">
                    <div style="color: #333;white-space:nowrap;overflow:hidden;text-overflow: ellipsis;">{{ itm.name || 'æœªè®¾ç½®ç½‘ç«™åç§°' }}</div>
                    <div style="font-size: 12px;color: #888;white-space:nowrap;overflow:hidden;text-overflow: ellipsis;">{{ itm.description || itm.url }}</div>
                  </div>
                </a>
              </div>
            </template>
          </el-card>
        </div>
      </div>

      <!-- ä¸Šä¼ jsonæ•°æ®å¼¹çª— -->
      <el-dialog
        v-model="showUploadDialog"
        title="ä¸Šä¼ jsonæ•°æ®"
        width="40%"
        destroy-on-close
      >
        <div>
          <el-alert
            title="æ–¹å¼ä¸€ï¼šä¸Šä¼ jsonæ–‡ä»¶"
            type="warning"
            show-icon
            :closable="false"
          />
          <input
            type="file"
            name="inputFile"
            id="inputFile"
            accept=".json"
            style="background: #FFF;margin: 20px 0;border-color: #57bc78;"
          />
          <el-alert
            title="æ–¹å¼äºŒï¼šç²˜è´´jsonæ–‡æœ¬å†…å®¹"
            type="warning"
            show-icon
            :closable="false"
            style="margin: 20px 0 10px"
          />
          <el-input
            type="textarea"
            :rows="6"
            placeholder="è¯·è¾“å…¥æˆ–ç²˜è´´jsonæ–‡æœ¬å†…å®¹"
            v-model.trim="jsonTextarea"
          />
          <p style="color:#999;">æ³¨æ„ï¼šä¸Šä¼ åä¼šç”¨jsonæ–‡ä»¶ä¸­çš„æ•°æ®æ›¿æ¢é¡µé¢ä¸Šå·²æœ‰çš„æ•°æ®</p>
        </div>

        <template #footer>
          <span class="dialog-footer">
            <el-button @click="showUploadDialog = false">å–æ¶ˆ</el-button>
            <el-button type="primary" @click="handleUploadJson">ç¡®è®¤ä¸Šä¼ </el-button>
          </span>
        </template>
      </el-dialog>

      <!-- æ–°å¢ç¼–è¾‘å¼¹çª— -->
      <el-dialog
        v-model="showEditDialog"
        :title="editDialogTitle"
        width="40%"
        @close="closeEditDialog"
      >
        <el-form
          ref="form"
          :model="form"
          label-width="80px"
        >
          <el-form-item
            v-if="editType < 3"
            label="å¯¼èˆªåˆ†ç±»"
            prop="title"
            :rules="[
              { required: true, message: 'è¯·è¾“å…¥åˆ†ç±»æ ‡é¢˜' }
            ]"
          >
            <el-input
              v-model="form.title"
              type="text"
              clearable
              placeholder="è¯·è¾“å…¥åˆ†ç±»æ ‡é¢˜"
            />
          </el-form-item>

          <el-form-item v-if="editType === 1">
            <el-alert title="æ–°å¢åˆ†ç±»æ—¶ï¼Œåˆ†ç±»ä¸‹éœ€æ·»åŠ è‡³å°‘ä¸€ä¸ªç½‘ç«™ä¿¡æ¯" type="warning" show-icon :closable="false" />
          </el-form-item>

          <template v-if="editType !== 2">
            <el-form-item
              label="ç½‘ç«™åç§°"
              prop="name"
              :rules="[
                { required: true, message: 'è¯·è¾“å…¥ç½‘ç«™åç§°' }
              ]"
            >
              <el-input
                v-model="form.name"
                type="text"
                clearable
                placeholder="è¯·è¾“å…¥ç½‘ç«™åç§°"
              />
            </el-form-item>
            <el-form-item
              label="ç½‘ç«™åœ°å€"
              prop="url"
              :rules="[
                { required: true, message: 'è¯·è¾“å…¥ç½‘ç«™urlåœ°å€' },
                { type: 'url', message: 'urlåœ°å€æ ¼å¼é”™è¯¯ï¼Œæ ¼å¼ç¤ºä¾‹ï¼šhttps://cafe123.cn' }
              ]"
            >
              <el-input
                v-model="form.url"
                type="text"
                clearable
                placeholder="urlæ ¼å¼ç¤ºä¾‹ï¼šhttps://cafe123.cn"
              />
            </el-form-item>
            <el-form-item
              label="ç½‘ç«™å›¾æ ‡"
              prop="icon"
              :rules="[
                { type: 'url', message: 'å›¾æ ‡urlåœ°å€æ ¼å¼é”™è¯¯ï¼Œæ ¼å¼ç¤ºä¾‹ï¼šhttps://cafe123.cn/logo.svg' }
              ]"
            >
              <el-input
                v-model="form.icon"
                type="text"
                clearable
                placeholder="urlæ ¼å¼ç¤ºä¾‹ï¼šhttps://cafe123.cn/logo.svg"
              />
              <el-button v-if="false" type="primary" plain size="small" @click="handleAutoFavicon">è‡ªåŠ¨è·å–å›¾æ ‡åœ°å€</el-button>
            </el-form-item>
            <el-form-item
              label="ç½‘ç«™æè¿°"
              prop="description"
            >
              <el-input
                v-model="form.description"
                type="textarea"
                clearable
                placeholder="è¯·è¾“å…¥ç½‘ç«™æè¿°"
              />
            </el-form-item>
          </template>
        </el-form>

        <template #footer>
          <span class="dialog-footer">
            <el-button @click="closeEditDialog">å–æ¶ˆ</el-button>
            <el-button type="primary" @click="submitForm">ç¡®è®¤</el-button>
          </span>
        </template>
      </el-dialog>
    `,
    props: {
      name: {
        type: String,
        default: ''
      }
    },
    data() {
        return {
          treeData: window.MarkdownWebNav && window.MarkdownWebNav.demoTreeData
            ? JSON.parse(JSON.stringify(window.MarkdownWebNav.demoTreeData))
            : [],
          treeDataBak: [
          {
            "id": 1,
            "title": "âœï¸ ç²¾é€‰åšå®¢",
            "label": "âœï¸ ç²¾é€‰åšå®¢",
            "isLeaf": false,
            "children": [
              {
                "id": 101,
                "isLeaf": true,
                "label": "å’–å•¡æ•™å®¤",
                "name": "å’–å•¡æ•™å®¤",
                "url": "https://cafe123.cn",
                "description": "å°±æƒ³å¼€é—´å°å°å’–å•¡é¦†ï¼Œåšåšå’–å•¡è°ƒè°ƒé…’",
                "icon": "https://cafe123.cn/logo.svg"
              },
              {
                "id": 102,
                "isLeaf": true,
                "label": "äººäººéƒ½æ˜¯ç å†œ",
                "name": "äººäººéƒ½æ˜¯ç å†œ",
                "url": "https://node123.cn",
                "description": "AIæ—¶ä»£ï¼Œé›¶åŸºç¡€ä¹Ÿèƒ½å­¦ä¼šç¼–ç¨‹",
                "icon": "https://node123.cn/images/logo.png"
              }
            ]
          },
          {
            "id": 2,
            "isLeaf": false,
            "title": "ğŸ§‘â€ğŸ’» AIå·¥å…·",
            "label": "ğŸ§‘â€ğŸ’» AIå·¥å…·",
            "children": [
              {
                "id": 201,
                "isLeaf": true,
                "label": "DeepSeek",
                "name": "DeepSeek",
                "url": "https://chat.deepseek.com",
                "description": "æˆ‘æ˜¯ DeepSeekï¼Œå¾ˆé«˜å…´è§åˆ°ä½ ï¼",
                "icon": "https://www.deepseek.com/favicon.ico"
              }
            ]
          }
        ],
        jsonTextarea: '',
        showUploadDialog: false,
        showEditDialog: false,
        form: {
          title: '',
          name: '',
          url: '',
          icon: '',
          description: ''
        },
        editType: 1, // 1-æ–°å¢åˆ†ç±» 2-ç¼–è¾‘åˆ†ç±» 3-æ–°å¢ç½‘ç«™ 4-ç¼–è¾‘ç½‘ç«™
        curRow: {}, // å½“å‰ç¼–è¾‘æ•°æ®
        historyList: []
      }
    },
    computed: {
      defaultMenuActive() {
        const { meta, path } = this.$route
        if (meta.activeMenu) {
          return meta.activeMenu
        }
        return path
      },
      editDialogTitle() {
        const titleEnum = {
          1: 'æ–°å¢å¯¼èˆªåˆ†ç±»',
          2: 'ç¼–è¾‘å¯¼èˆªåˆ†ç±»',
          3: 'æ–°å¢ç½‘ç«™ä¿¡æ¯',
          4: 'ç¼–è¾‘ç½‘ç«™ä¿¡æ¯',
        }

        return titleEnum[this.editType]
      },
      // å®‰å…¨åœ°ç”Ÿæˆé¢œè‰²
      generateColor() {
        return () => {
          if (window.MarkdownWebNav && window.MarkdownWebNav.generateColor) {
            return window.MarkdownWebNav.generateColor()
          } else {
            console.error('window.MarkdownWebNav æœªå®šä¹‰ï¼Œæ— æ³•ç”Ÿæˆé¢œè‰²')
            return '#57bc78' // é»˜è®¤é¢œè‰²
          }
        }
      }
    },
    created() {
      this.init()
    },
    methods: {
      init() {
        this.historyList = this.getHistoryStorage()
        if (this.historyList.length) {
          this.treeData = this.historyList[0].list || []
        } else {
          this.reset()
        }
      },

      // é‡ç½®æˆç¤ºä¾‹æ•°æ®
      reset() {
        if (window.MarkdownWebNav && window.MarkdownWebNav.demoTreeData) {
          this.treeData = (JSON.parse(JSON.stringify(window.MarkdownWebNav.demoTreeData))).map(m => this.fmtJsonData(m))
        } else {
          console.error('window.MarkdownWebNav æœªå®šä¹‰ï¼Œæ— æ³•é‡ç½®æ•°æ®')
        }
      },

      // è®¾ç½®ä¿®æ”¹è®°å½•ç¼“å­˜æ•°æ®
      setHistoryStorage() {
        if (!this.treeData || !this.treeData.length || !Array.isArray(this.treeData)) {
          return
        }

        const history = this.getHistoryStorage()
        // è·ä¸Šä¸€æ¡è®°å½•10ç§’ä»¥ä¸Šæ‰ç¼“å­˜
        if (history.length) {
          const now = Date.now()
          const preDate = history[0].date
          if (now - preDate < (10 * 1000)) {
            return
          }
        }

        const current = {
          date: Date.now(),
          list: this.treeData
        }
        history.unshift(current)

        try {
          // æœ€å¤šç¼“å­˜100æ¡ä¿®æ”¹è®°å½•
          const storageList = history.length > 100 ? history.slice(0, 100) : history
          localStorage.setItem('history', JSON.stringify(storageList))

          // æ›´æ–°å½“å‰é¡µé¢ä¸Šç¼“å­˜æ•°æ®
          this.historyList = this.getHistoryStorage()
        } catch (error) {
          console.log('setHistoryStorage error:', error)
        }
      },
      // è·å–ä¿®æ”¹è®°å½•ç¼“å­˜æ•°æ®
      getHistoryStorage() {
        let history = []
        try {
          const item = localStorage.getItem('history')
          history = item ? JSON.parse(item) : []
        } catch (error) {
          console.log('getHistoryStorage error:', error)
        }
        return history
      },

      // é€‰æ‹©å†å²ä¿®æ”¹è®°å½•
      handlePickHistory(item) {
        this.$confirm(`ç¡®è®¤ä½¿ç”¨ ${this.formatDate(item.date)} çš„ä¿®æ”¹è®°å½•å—ï¼Ÿç¡®è®¤åä¼šæ›¿æ¢é¡µé¢ä¸Šç°æœ‰çš„æ•°æ®ï¼Œå»ºè®®æå‰ç‚¹å‡»ä¸‹æ–¹"å¯¼å‡ºjson"æŒ‰é’®å¤‡ä»½å¥½æ•°æ®åå†æ“ä½œ`, 'æ¸©é¦¨æç¤º', {
          confirmButtonText: 'ç¡®è®¤ä½¿ç”¨',
          cancelButtonText: 'å¯¼å‡ºjson',
          distinguishCancelAndClose: true,
        }).then(() => {
          this.treeData = item.list || []
        })
        .catch((action) => {
          if (action === 'cancel') {
            this.exportJson()
          }
        })
      },

      // ç¼–è¾‘
      handleEdit(data) {
        this.curRow = data || {}
        this.form = {
          title: this.curRow.title || '',
          name: this.curRow.name ||'',
          url: this.curRow.url ||'',
          icon: this.curRow.icon ||'',
          description: this.curRow.description ||''
        }
        this.editType = this.curRow.isLeaf ? 4 : 2
        this.showEditDialog = true
      },
      // æ–°å¢
      handleAppend(type, data = {}) {
        this.curRow = data
        this.editType = type
        this.showEditDialog = true
      },
      // åˆ é™¤
      remove(node, data) {
        const parent = node.parent
        const children = parent.data.children || parent.data
        if (children.length < 2) {
          this.$message({
            type: 'warning',
            message: 'è¯·è‡³å°‘ä¿ç•™ä¸€ä¸ªå…ƒç´ '
          })
          return
        }
        const index = children.findIndex(d => d.id === data.id)
        children.splice(index, 1)

        // åˆ é™¤çš„æ—¶å€™ç¼“å­˜ä¸‹è®°å½•
        this.setHistoryStorage()
      },
      // æŸ¥æ‰¾çˆ¶èŠ‚ç‚¹
      findParentNode(treeData, childId) {
        for (let i = 0; i < treeData.length; i++) {
          const node = treeData[i]
          if (node.children && node.children.length) {
            // æ£€æŸ¥å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸­æ˜¯å¦åŒ…å«ç›®æ ‡å­èŠ‚ç‚¹
            const hasChild = node.children.some(child => child.id === childId)
            if (hasChild) {
              return node
            }
            // é€’å½’æŸ¥æ‰¾å­èŠ‚ç‚¹
            const found = this.findParentNode(node.children, childId)
            if (found) {
              return found
            }
          }
        }
        return null
      },
      
      // å¤åˆ¶
      handleCopy(type, node, data) {
        // type 1-å¤åˆ¶åˆ†ç±» 2-å¤åˆ¶ç½‘å€
         if (type === 1) {
           // å¤åˆ¶åˆ†ç±»ï¼ˆçˆ¶èŠ‚ç‚¹ï¼‰
           const copiedCategory = JSON.parse(JSON.stringify(data))
           // ç”Ÿæˆæ–°çš„ID
           copiedCategory.id = this.generateId()
           // åœ¨titleåé¢æ·»åŠ _copyåç¼€
           copiedCategory.title = (copiedCategory.title || '') + '_copy'
           copiedCategory.label = copiedCategory.title
           // æ›´æ–°å­å…ƒç´ çš„ID
           if (copiedCategory.children && copiedCategory.children.length) {
             copiedCategory.children = copiedCategory.children.map(child => ({
               ...child,
               id: this.generateId()
             }))
           }
           
           // æ‰¾åˆ°å½“å‰åˆ†ç±»åœ¨treeDataä¸­çš„ä½ç½®
           const currentIndex = this.treeData.findIndex(item => item.id === data.id)
           if (currentIndex !== -1) {
             // åœ¨å½“å‰åˆ†ç±»åé¢æ’å…¥å¤åˆ¶çš„åˆ†ç±»
             this.treeData.splice(currentIndex + 1, 0, copiedCategory)
           }
           
          //  this.$message({
          //    type: 'success',
          //    message: 'åˆ†ç±»å¤åˆ¶æˆåŠŸ'
          //  })
         } else if (type === 2) {
           // å¤åˆ¶ç½‘å€ï¼ˆå­èŠ‚ç‚¹ï¼‰
           const copiedWebsite = {
             ...data,
             id: this.generateId()
           }
           // åœ¨nameåé¢æ·»åŠ _copyåç¼€
           copiedWebsite.name = (copiedWebsite.name || '') + '_copy'
           copiedWebsite.label = copiedWebsite.name
           
           // æ‰¾åˆ°çˆ¶èŠ‚ç‚¹
           const parentNode = this.findParentNode(this.treeData, data.id)
           if (parentNode && parentNode.children) {
             // æ‰¾åˆ°å½“å‰ç½‘ç«™åœ¨çˆ¶èŠ‚ç‚¹childrenä¸­çš„ä½ç½®
             const currentIndex = parentNode.children.findIndex(item => item.id === data.id)
             if (currentIndex !== -1) {
               // åœ¨å½“å‰ç½‘ç«™åé¢æ’å…¥å¤åˆ¶çš„ç½‘ç«™
               parentNode.children.splice(currentIndex + 1, 0, copiedWebsite)
             }
           }
           
          //  this.$message({
          //    type: 'success',
          //    message: 'ç½‘ç«™å¤åˆ¶æˆåŠŸ'
          //  })
         }
         
         // æ›´æ–°treeDataè§¦å‘è§†å›¾æ›´æ–°
         this.treeData = [...this.treeData]
         
         // å¤åˆ¶çš„æ—¶å€™ç¼“å­˜ä¸‹è®°å½•
         this.setHistoryStorage()
      },
      // å…³é—­å¼¹çª—
      closeEditDialog() {
        this.form = {
          title: '',
          name: '',
          url: '',
          icon: '',
          description: ''
        }
        this.$refs.form.resetFields()
        this.showEditDialog = false
      },
      // æäº¤
      submitForm() {
        this.$refs.form.validate((valid) => {
          if (valid) {
            this.updateTreeNodeInfo(this.treeData, this.curRow.id, this.form)
            this.treeData = [...this.treeData]
            this.closeEditDialog()

            // æ–°å¢ç¼–è¾‘çš„æ—¶å€™ç¼“å­˜ä¸‹è®°å½•
            this.setHistoryStorage()
          }
        })
      },
      // æ›´æ–°treeç»„ä»¶èŠ‚ç‚¹ä¿¡æ¯
      updateTreeNodeInfo(array, id, newInfo) {
        const f = newInfo

        // æ–°å¢å¯¼èˆªåˆ†ç±»ï¼Œç›´æ¥æ·»åŠ åˆ°åˆ—è¡¨æœ€å
        if (!id && this.editType == 1) {
          const obj = {
            id: this.generateId(),
            isLeaf: false,
            title: f.title,
            label: f.title,
            children: [{
              id: this.generateId(),
              isLeaf: true,
              label: f.name,
              name: f.name,
              url: f.url,
              icon: f.icon,
              description: f.description,
            }]
          }
          this.treeData.push(obj)
          return
        }

        for (let index = 0; index < array.length; index++) {
          const element = array[index]
          if (element.id === id) {
            if (this.editType === 1) {
              const obj = {
                id: this.generateId(),
                title: f.title,
                label: f.title,
              }
              array[index].push(obj)
            }

            if (this.editType === 2) {
              array[index].title = f.title
              array[index].label = f.title
            }

            if (this.editType === 3) {
              const obj = {
                id: this.generateId(),
                isLeaf: true,
                label: f.name,
                name: f.name,
                url: f.url,
                icon: f.icon,
                description: f.description,
              }
              if (!array[index].children) {
                array[index].children = []
              }
              array[index].children.push(obj)
            }

            if (this.editType === 4) {
              array[index].label = f.name
              array[index].name = f.name
              array[index].url = f.url
              array[index].icon = f.icon
              array[index].description = f.description
            }
            break
          }

          // ç»§ç»­å¾€å­çº§æ‰¾
          if (array[index].children) {
            this.updateTreeNodeInfo(array[index].children, id, newInfo)
          }
        }
      },

      // è‡ªåŠ¨è·å–ç½‘ç«™ favicon å›¾æ ‡
      handleAutoFavicon() {
        if (!this.form.url) {
          this.$message({
            type: 'error',
            message: 'è¯·å…ˆè¾“å…¥ç½‘ç«™urlåœ°å€'
          })
          return
        }
        this.getFavicon(this.form.url).then(faviconUrl => {
            if (faviconUrl) {
              let wholeUrl = ''

              // è§£æurlä¸­çš„åŸºç¡€è·¯å¾„
              const parsedUrl = new URL(this.form.url)
              let baseUrl = parsedUrl.origin // è¿™å°†è¿”å›åè®®å’Œä¸»æœºåéƒ¨åˆ†ï¼Œå³æ ¹è·¯å¾„

              // å…¼å®¹æœ¬åœ° file åè®®
              if (faviconUrl.startsWith('file://')) {
                wholeUrl = baseUrl + faviconUrl.replace('file://', '')
              }
              // å…¼å®¹ç›´æ¥é¡¹ç›®è·Ÿè·¯å¾„
              if (faviconUrl.startsWith('/')) {
                wholeUrl = baseUrl + faviconUrl
              }

              this.form.icon = wholeUrl
            }
        })
      },

      // ä¸Šä¼ jsonæ–‡ä»¶
      handleUploadJson() {
        const input = document.querySelector('#inputFile')
        const files = input.files || []
        const file = files[0]
        if (!file) {
          // ä¸Šä¼ æ–‡ä»¶ä¸å­˜åœ¨æ—¶å–æ–¹å¼äºŒæ–‡æœ¬åŸŸè¾“å…¥æ¡†ä¸­çš„å†…å®¹
          if (this.jsonTextarea) {
            let list = []
            try {
              list = JSON.parse(this.jsonTextarea).root
            } catch (error) {
              console.log('jsonæ–‡æœ¬å†…å®¹è§£æé”™è¯¯ï¼š', error)
              this.$message.error('jsonæ–‡æœ¬å†…å®¹è§£æé”™è¯¯, è¯·æ ¸å¯¹jsonæ ¼å¼')
              return
            }

            this.treeData = list.map(m => this.fmtJsonData(m))
            this.showUploadDialog = false
            return
          }

          this.$message.error('è¯·é€‰æ‹©è¦ä¸Šä¼ çš„jsonæ–‡ä»¶æˆ–è€…è¾“å…¥jsonæ–‡æœ¬æ•°æ®')
        } else {
          // è¯»å–æ–‡æœ¬
          file.text().then(res => {
            let list = []
            try {
              list = JSON.parse(res || '').root
            } catch (error) {
              console.log('jsonæ–‡ä»¶è§£æé”™è¯¯ï¼š', error)
              this.$message.error('jsonæ–‡ä»¶è§£æé”™è¯¯')
              return
            }

            this.treeData = list.map(m => this.fmtJsonData(m))
            this.showUploadDialog = false
          })
        }
      },
      // æ ¼å¼åŒ–jsonæ•°æ®
      fmtJsonData(info, isLeaf = false) {
        if (window.MarkdownWebNav && window.MarkdownWebNav.fmtJsonData) {
          return window.MarkdownWebNav.fmtJsonData(info, isLeaf);
        } else {
          console.error('window.MarkdownWebNav æœªå®šä¹‰ï¼Œæ— æ³•æ ¼å¼åŒ–æ•°æ®')
          return info
        }
      },

      // ä¸‹è½½jsonæ¨¡æ¿
      downloadJsonTemplate() {
        if (!window.MarkdownWebNav || !window.MarkdownWebNav.demoTreeData) {
          this.$message.error('window.MarkdownWebNav æœªå®šä¹‰ï¼Œæ— æ³•ä¸‹è½½æ¨¡æ¿')
          return
        }
        const tempJson = {
          "root": window.MarkdownWebNav.demoTreeData
        }

        this.downloadFile(JSON.stringify(tempJson, null, 2), 'web-nav-template.json')
      },
      // å¤åˆ¶markdown
      copyMarkdown() {
        const txt = this.generateMarkdown()
        this.copyText(txt)
      },
      // å¯¼å‡ºmarkdown
      exportMarkdown() {
        this.downloadFile(this.generateMarkdown(), 'web-nav.md')
      },
      // ç”Ÿæˆmarkdownæ•°æ®
      generateMarkdown() {
        if (window.MarkdownWebNav && window.MarkdownWebNav.generateMarkdown) {
          return window.MarkdownWebNav.generateMarkdown(this.treeData);
        } else {
          console.error('window.MarkdownWebNav æœªå®šä¹‰ï¼Œæ— æ³•ç”Ÿæˆmarkdown')
          return ''
        }
      },
      exportJson() {
        const list = this.deleteJsonInvalidKey(this.treeData)
        const json = {
          root: list
        }

        this.downloadFile(JSON.stringify(json, null, 2), 'web-nav.json')
      },
      // åˆ é™¤jsonæ•°æ®ä¸­çš„æ— æ•ˆkey
      deleteJsonInvalidKey(array) {
        if (!array || !array.length) return

        const result = []
        const validKeys = ['title', 'name', 'url', 'icon', 'description']

        for (let index = 0; index < array.length; index++) {
          const element = array[index]
          const keys = Object.keys(element)
          console.log(keys);
          
          const info = {}
          keys.map(k => {
            if (validKeys.includes(k)) {
              info[k] = element[k]
            }
          })
          if (element.children) {
            info.children = this.deleteJsonInvalidKey(element.children)
          }

          result.push(info)
        }
        console.log(result);
        

        return result
      },

      // ä¸‹è½½æ–‡ä»¶
      downloadFile(txt, fileName) {
        if (!txt) return
        const blob = new Blob([txt], { type: 'plain/text' })
        const href = URL.createObjectURL(blob)

        const element = document.createElement('a')
        element.setAttribute('href', href)
        element.setAttribute('download', fileName)
        document.body.appendChild(element)
        element.click()
        document.body.removeChild(element)
      },
      // å¤åˆ¶å†…å®¹åˆ°ç²˜è´´æ¿
      copyText(text) {
        if (!text) return
        if (navigator.clipboard) {
            navigator.clipboard.writeText(text)
        } else {
            let textarea = document.createElement('textarea')
            document.body.appendChild(textarea)
            textarea.style.position = 'fixed'
            textarea.style.clip = 'rect(0 0 0 0)'
            textarea.style.top = '10px'
            textarea.value = text
            textarea.select()
            document.execCommand('copy', true)
            document.body.removeChild(textarea)
        }
        this.$message({
          type: 'success',
          message: 'å¤åˆ¶æˆåŠŸ'
        })
      },
      // ç”Ÿæˆå”¯ä¸€id
      generateId() {
        return Date.now() + '' + Math.random().toString(36).substr(2, 9)
      },
      // è·å–ç½‘ç«™ favicon å›¾æ ‡
      async getFavicon(url) {
        try {
          // å‘é€è¯·æ±‚è·å–HTMLå†…å®¹
          const response = await fetch(url)
          const html = await response.text()
  
          // åˆ›å»ºä¸€ä¸ªDOMè§£æå™¨
          const parser = new DOMParser()
          const doc = parser.parseFromString(html, 'text/html')
  
          // æŸ¥æ‰¾linkæ ‡ç­¾ä¸­typeä¸º"image/x-icon"çš„å…ƒç´ 
          const links = doc.querySelectorAll('link[rel="shortcut icon"], link[rel="icon"]')
          if (links.length > 0) {
            const faviconUrl = links[0].href
            return faviconUrl
          } else {
            return null // æ²¡æœ‰æ‰¾åˆ°favicon
          }
        } catch (error) {
          // console.error('Error fetching or parsing the page:', error)
          this.$message({
            type: 'error',
            message: 'å› ç›®æ ‡ç½‘ç«™è·¨åŸŸç­‰é™åˆ¶ï¼Œæ— æ³•è‡ªåŠ¨è·å–åˆ°ç½‘ç«™å›¾æ ‡åœ°å€ï¼Œè¯·æ‰‹åŠ¨å¡«å†™'
          })
          return null
        }
      },

      // æ ¼å¼åŒ–æ—¶é—´
      formatDate(timestamp) {
        if (!timestamp) return

        const date = new Date(timestamp)
        const year = date.getFullYear()
        const month = String(date.getMonth() + 1).padStart(2, '0')
        const day = String(date.getDate()).padStart(2, '0')
        const hours = String(date.getHours()).padStart(2, '0')
        const minutes = String(date.getMinutes()).padStart(2, '0')
        const seconds = String(date.getSeconds()).padStart(2, '0')
        return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`
      },
    }
  }

  const Readme = {
    template: `<div style="background:#FFF;padding:20px 40px;line-height: 2;">
<h2>markdown-web-nav</h2>
<p>ä¸€ä¸ªåˆ¶ä½œ markdown è¯­æ³•ç½‘å€å¯¼èˆªé¡µé¢çš„å¯è§†åŒ–ç½‘é¡µå·¥å…·ï¼Œè®©æ™®é€šç”¨æˆ·ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ä¸Šé¢æ–°å¢ç¼–è¾‘ç½‘ç«™ä¿¡æ¯ï¼Œç„¶åè‡ªåŠ¨ç”Ÿæˆå‡ºæ¥æˆ‘ä»¬éœ€è¦çš„ markdown æ•°æ®ï¼Œå·²å®ç°çš„åŠŸèƒ½åŒ…æ‹¬ï¼š</p>

<ul><li>å¯ä»¥åœ¨ç½‘é¡µä¸Šæ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤éœ€è¦çš„ç½‘å€æ•°æ®</li><li>é€šè¿‡å¯¼å…¥jsonæ–‡ä»¶ç›´æ¥ç”Ÿæˆé¡µé¢æ•°æ®</li><li>å®æ—¶é¢„è§ˆæœ€ç»ˆçš„markdownæ¸²æŸ“çš„ç½‘å€å¯¼èˆªæ•ˆæœ</li><li>ä¸€é”®è‡ªåŠ¨å¤åˆ¶æœ€ç»ˆçš„markdownæ•°æ®</li><li>å¯¼å‡ºé¡µé¢æ•°æ®åˆ°markdownæ–‡ä»¶ã€jsonæ–‡ä»¶</li><li>å¯è®°å½•æœ€è¿‘çš„å†å²ä¿®æ”¹è®°å½•ï¼Œæ–¹ä¾¿å›æ»šä¿®æ”¹</li></ul>

<h3>ä½¿ç”¨ markdown-web-nav å·¥å…·åˆ¶ä½œç½‘å€å¯¼èˆªé¡µé¢æ­¥éª¤</h3>

<p>åˆ¶ä½œå‡ºä¸€ä¸ªç½‘å€å¯¼èˆªé¡µé¢æ€»å…±åˆ†ä¸ºå¦‚ä¸‹6ä¸ªæ­¥éª¤ï¼Œæ“ä½œä¹Ÿå¾ˆç®€å•ï¼š</p>

<h4>1ã€æ‰“å¼€ markdown-web-nav ç½‘é¡µå·¥å…·</h4>

<p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š<a href="https://cafehaus.github.io/markdown-web-nav" target="blank">markdown-web-nav</a></p>

<p>ç½‘ç«™å†…å®¹åŒºå·¦ä¾§ä¸ºçº§è”ç½‘å€æ•°æ®ç®¡ç†åŒºï¼Œå¯ä»¥åœ¨è¿™é‡Œæ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤éœ€è¦çš„ç½‘å€æ•°æ®ã€‚å³ä¾§ä¸ºæ•ˆæœé¢„è§ˆåŒºï¼Œå½“æˆ‘ä»¬ä¿®æ”¹äº†ç½‘å€æ•°æ®åï¼Œå¯ä»¥åœ¨è¿™é‡Œå®æ—¶æŸ¥çœ‹åˆ°ç”¨markdownæ¸²æŸ“å‡ºæ¥ä¸€æ ·çš„æœ€ç»ˆæ•ˆæœã€‚</p>

<p><img src="./static/2.png" width="80%" /></p>

<h4>2ã€ä¸Šä¼ jsonç½‘å€æ•°æ®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰</h4>

<p>å¯¹äºç¨‹åºå‘˜ç”¨æˆ·ï¼Œå¯èƒ½æ›´åŠ ä¹ æƒ¯ç¼–å†™ä¸€ä»½ json æ•°æ®ï¼Œç¼–å†™å¥½åç‚¹å‡»â€œä¸Šä¼ jsonç½‘å€æ•°æ®æ–‡ä»¶â€æŒ‰é’®å¯ç›´æ¥ä¸Šä¼ æ•°æ®ï¼Œæ­¤æ—¶å·¦ä¾§æ•°æ®å’Œå³ä¾§é¢„è§ˆæ•ˆæœéƒ½ä¼šè‡ªåŠ¨è¾¹åŸ json æ–‡ä»¶ä¸­å¯¹åº”çš„æ•°æ®ã€‚</p>

<p><img src="./static/3.png" width="80%" /></p>

<p>æ³¨æ„ç¼–å†™ json æ•°æ®æ—¶æŒ‰æŒ‰ç…§ç‰¹å®šçš„æ ¼å¼ï¼Œå¯¹äºå¯¼èˆªåˆ†ç±»å¿…é¡»è®¾ç½® titleï¼Œå¯¹äºåˆ†ç±»ä¸‹çš„ç½‘ç«™å¯ä»¥é€šè¿‡ nameã€urlã€iconã€description åˆ†åˆ«è®¾ç½®å¯¹åº”çš„ä¿¡æ¯ï¼Œå…·ä½“æ ¼å¼å¯å‚ç…§â€œä¸‹è½½ç¤ºä¾‹æ¨¡æ¿â€ä¸­çš„ json æ–‡ä»¶ã€‚</p>

<p>å½“ç„¶ï¼Œå¯¹äºä¸ä¹ æƒ¯ json æ¨¡å¼çš„ç”¨æˆ·å¯ä»¥ç›´æ¥è·³è¿‡æ­¤æ­¥éª¤ï¼Œå‚è€ƒä¸‹é¢çš„ç¬¬3æ­¥ã€‚</p>

<h4>3ã€æ–°å¢å¯¼èˆªåˆ†ç±»</h4>

<p>ç½‘å€å¯¼èˆªä¸­çš„ç½‘ç«™æ•°æ®æˆ‘ä»¬ä¸€èˆ¬ä¼šè¿›è¡Œåˆ†ç±»ï¼Œæ¯”å¦‚ç§‘æŠ€çš„æ”¾ä¸€å—ã€ç¾é£Ÿçš„æ”¾ä¸€å—...è¿™é‡Œæˆ‘ä»¬ä¹Ÿéœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªå¯¼èˆªåˆ†ç±»ï¼Œåœ¨æ–°å¢ä¸€ä¸ªåˆ†ç±»çš„åŒæ—¶æˆ‘ä»¬éœ€è¦åŒæ­¥æ·»åŠ ä¸€ä¸ªç½‘ç«™å¯¼èˆªæ•°æ®ã€‚</p>

<p><img src="./static/4.png" width="80%" /></p>

<h4>4ã€æ–°å¢ç½‘ç«™æ•°æ®</h4>

<p>æ·»åŠ å¥½å¯¼èˆªåˆ†ç±»åæˆ‘ä»¬å°±å¯ä»¥åœ¨åˆ†ç±»ä¸‹é¢æ·»åŠ ç½‘ç«™æ•°æ®äº†ï¼Œç›´æ¥ç‚¹å‡»å·¦ä¾§åˆ†ç±»ä¿¡æ¯åé¢çš„â•å·å›¾æ ‡ï¼Œå¯ä»¥åœ¨å¼¹çª—ä¸­å¡«å†™å…·ä½“çš„ç½‘ç«™ä¿¡æ¯ï¼Œå…¶ä¸­ç½‘ç«™åç§°å’Œç½‘ç«™åœ°å€å¿…å¡«ã€‚</p>

<p>ä¸ºäº†æ›´åŠ æœ‰è¾¨è¯†åº¦å’Œç¾è§‚å»ºè®®ç½‘ç«™å›¾æ ‡åœ°å€ä¹Ÿå¡«å†™ä¸Šï¼Œå¦‚æœä¸å¡«å†™é»˜è®¤ä¼šç”¨ç½‘ç«™åç§°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„åœ†å½¢æ–‡å­—å›¾æ ‡ï¼Œå¯¹äºä¸çŸ¥é“æ€ä¹ˆè·å–ç½‘ç«™å¯¹åº”å›¾æ ‡çš„å¯ä»¥å‚è€ƒåé¢çš„å¸¸è§é—®é¢˜ç« èŠ‚ã€‚</p>

<p>è¿›å…¥ç½‘é¡µåé»˜è®¤æœ‰å‡ ä¸ªç¤ºä¾‹æ•°æ®ï¼Œå¯ä»¥ç›´æ¥åœ¨ç¤ºä¾‹çš„åŸºç¡€ä¸Šä¿®æ”¹ã€æ–°å¢ã€‚ç‚¹å‡»åˆ†ç±»å’Œç½‘ç«™æ•°æ®å‰é¢çš„å¤åˆ¶å›¾æ ‡å¯ä»¥å¿«é€Ÿå¤åˆ¶å½“å‰é¡¹ï¼Œç‚¹å‡»ç¼–è¾‘å›¾æ ‡å¯ä»¥ç¼–è¾‘è¯¦ç»†ä¿¡æ¯ï¼Œç‚¹å‡»å‡å·å›¾æ ‡å¯ä»¥åˆ é™¤å½“å‰å…ƒç´ ï¼Œç‚¹å‡»åŠ å·å›¾æ ‡å¯ä»¥æ–°å¢å½“å‰åˆ†ç±»ä¸‹çš„ç½‘ç«™ä¿¡æ¯ã€‚</p>

<p><img src="./static/5.png" width="80%" /></p>

<h4>5ã€å¤åˆ¶ markdown æ•°æ®</h4>

<p>æ•°æ®æ·»åŠ å®Œæˆåï¼Œå¯ä»¥ç‚¹å‡»å³ä¾§çš„â€œå¤åˆ¶markdownæ•°æ®â€ï¼Œç›´æ¥å°†æœ€ç»ˆçš„markdownæ•°æ®å¤åˆ¶åˆ°ç²˜è´´æ¿ä¸Šã€‚åŒæ—¶å¦‚æœæ¯æ¬¡ä¿®æ”¹æ¯”è¾ƒå¤§æ—¶ä¹Ÿå»ºè®®ç‚¹å‡»â€œå¯¼å‡ºjsonâ€œæŒ‰é’®å¤‡ä»½ä¸€ä¸‹ï¼Œå¯å°†å½“å‰æ•°æ®å¯¼å‡ºä¸ºä¸€ä¸ªjsonæ–‡ä»¶ä¿å­˜åœ¨è‡ªå·±ç”µè„‘ä¸Šï¼Œä¸‹æ¬¡æƒ³å†æ¬¡ä¿®æ”¹æ—¶å¯ä»¥ç›´æ¥é€šè¿‡â€œä¸Šä¼ jsonç½‘å€æ•°æ®æ–‡ä»¶â€åŠ è½½å›æ¥ä¹‹å‰çš„æ‰€æœ‰æ•°æ®ã€‚</p>

<p><img src="./static/6.png" width="80%" /></p>

<h4>6ã€ç²˜è´´åˆ°æ”¯æŒmarkdownå†…å®¹æ¸²æŸ“çš„æ–‡æ¡£é¡µé¢ä¸­</h4>

<p>ä¸Šä¸€æ­¥å¤åˆ¶å¥½markdownæ•°æ®åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ”¯æŒmarkdownæ¸²æŸ“çš„æ–‡æ¡£ä¸­æˆ–è€…ç¼–è¾‘å™¨ä¸­ç²˜è´´è¿›å»ã€‚</p>

<p>å¦‚æœæƒ³è‡ªå·±æœ¬åœ°ä¿®æ”¹markdownæ•°æ®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥é€‰æ‹©â€œå¯¼å‡ºmarkdownâ€ä¸‹è½½åˆ°æœ¬åœ°å†è¿›è¡Œä¿®æ”¹ã€‚</p>

<h3>å¸¸è§é—®é¢˜</h3>

<h4>1ã€å¦‚ä½•è¿˜åŸä¹‹å‰çš„æ•°æ®ï¼Ÿ</h4>

<p>åˆ¶ä½œå¥½ç½‘å€å¯¼èˆªåï¼Œå¦‚æœè¿‡äº†ä¸€æ®µæ—¶é—´æƒ³è¦å†æ¬¡æ–°å¢æ—¶ï¼Œç›´æ¥æ‰“å¼€ç½‘ç«™å·¥å…· https://cafehaus.github.io/markdown-web-nav åå¦‚ä½•èƒ½åŠ è½½å›æ¥ä¹‹å‰çš„æ•°æ®ï¼Ÿ</p>

<p>æœ‰ä¸¤ç§æ–¹å¼ï¼šç¬¬ä¸€ç§é€šè¿‡äº‹å…ˆä¸‹è½½å¥½ä¹‹å‰çš„jsonå¤‡ä»½æ–‡ä»¶ï¼Œå†é€šè¿‡â€œä¸Šä¼ jsonç½‘å€æ•°æ®æ–‡ä»¶â€å¯ä»¥åŠ è½½å›ä¹‹å‰çš„æ•°æ®ã€‚</p>

<p>ç¬¬äºŒç§å¯ä»¥é€šè¿‡é¡¶éƒ¨çš„â€œä¿®æ”¹å†å²â€æŒ‰é’®é€‰æ‹©ä¹‹å‰çš„æŸä¸ªæ—¶é—´ç‚¹çš„ç‰ˆæœ¬è¿›è¡Œè¿˜åŸï¼Œå¯ä»¥é¼ æ ‡æ”¾åˆ°é¡¶éƒ¨çš„â€œä¿®æ”¹å†å²â€æŒ‰é’®ä¸Šï¼Œé‡Œé¢ä¼šè®°å½•æˆ‘ä»¬æœ€è¿‘çš„ä¸€äº›ä¿®æ”¹è®°å½•ï¼Œç‚¹å‡»æŸä¸ªä¿®æ”¹æ—¶é—´å¯ä»¥åŠ è½½å¯¹åº”æ—¶é—´ç‚¹çš„ä¿®æ”¹æ•°æ®ï¼Œä¸è¿‡æ“ä½œå‰å»ºè®®å…ˆç‚¹â€œå¯¼å‡ºjsonâ€æŒ‰é’®å°†å½“å‰çš„æ•°æ®å¤‡ä»½åˆ°è‡ªå·±ç”µè„‘æœ¬åœ°ï¼Œä»¥é˜²æ•°æ®ä¸¢å¤±ã€‚</p>

<p>ç¬¬äºŒç§é€šè¿‡ä¿®æ”¹å†å²æ‰¾å›æ¯”è¾ƒæ–¹ä¾¿ç®€å•ï¼Œä¸è¿‡ä¾ç„¶å»ºè®®å¤§å®¶æ¯æ¬¡åŒæ—¶ä¸‹è½½ json æ–‡ä»¶å¤‡ä»½ï¼Œå› ä¸ºä¿®æ”¹å†å²è®°å½•æœ‰å¯èƒ½ä¼šå­˜åœ¨æ•°æ®ä¸¢å¤±çš„é—®é¢˜ã€‚</p>

<p><img src="./static/7.png" width="80%" /></p>

<h4>2ã€å¦‚ä½•æ‰¾åˆ°æŸä¸ªç½‘ç«™çš„ icon å›¾æ ‡é“¾æ¥ï¼Ÿ</h4>

<p>å¤§å¤šç½‘ç«™ä½¿ç”¨çš„çš„å›¾æ ‡å°±æ˜¯åœ¨åŸŸååé¢è·Ÿä¸Šå¦‚ä¸‹çš„ä¸€äº›åç¼€ï¼š</p>

<ul><li>/favicon.ico</li><li>/logo.png</li><li>/logo.svg</li><li>/images/logo.png</li></ul>

<p>å¯ä»¥è‡ªå·±åœ¨æµè§ˆå™¨ä¸­ç½‘å€åé¢åŠ ä¸Šä¸Šé¢çš„åç¼€æµ‹è¯•çœ‹èƒ½ä¸èƒ½æ­£å¸¸æ‰“å¼€å›¾ç‰‡ï¼Œå¦‚æœæ‰“å¼€å¤±è´¥ä¹Ÿå¯ä»¥æ¢åé¢ä¸€ç§åŠæ³•ã€‚</p>

<p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æˆ‘ä»¬éœ€è¦çš„ç½‘å€åï¼Œé¼ æ ‡å³é”®-æ£€æŸ¥ï¼ˆå¿«æ·é”®F12ï¼‰ï¼Œä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨è°ƒè¯•å°ï¼Œç„¶åé€‰åˆ° network åå†åˆ·æ–°ä¸€ä¸‹ï¼Œæµè§ˆå™¨ä¼šå†æ¬¡åŠ è½½å½“å‰é¡µé¢çš„æ‰€æœ‰èµ„æºï¼Œé‡Œé¢ä¼šæœ‰å„ç§htmlã€jsã€cssã€å›¾ç‰‡è¿™äº›èµ„æºï¼Œç„¶åä»è¿™äº›èµ„æºä¸­å»æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„å›¾æ ‡ï¼Œä¸€èˆ¬ä»¥ logoã€favicon è¿™äº›å‘½åï¼Œæ‰¾åˆ°åå†é¼ æ ‡å³é”®-Open in new tabï¼Œä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œæœ€åå¤åˆ¶å‡ºæ¥æ‰“å¼€çš„æµè§ˆå™¨é¡µé¢åœ°å€ã€‚</p>

<p><img src="./static/8.png" width="80%" /></p>

<h4>3ã€å¦‚ä½•åé¦ˆé—®é¢˜ï¼Ÿ</h4>

<p>æœ‰ä»»ä½•ä½¿ç”¨é—®é¢˜æˆ–å»ºè®®å¯ä»¥åœ¨ github å¯¹åº”ä»“åº“æ <a href="https://github.com/cafehaus/markdown-web-nav/issues" target="blank">issue</a></p>
    </div>`,
  }
  // 2.2 ç”Ÿæˆè·¯ç”±è¡¨
  const routes = [
    { path: '/', redirect: '/home' },
    { path: '/home', component: Home },
    { path: '/readme', component: Readme },
  ]
  // 2.3 åˆ›å»º router å®ä¾‹
  const router = VueRouter.createRouter({
    history: VueRouter.createWebHashHistory(),
    routes,
  })
  // 2.4 å…¨å±€æ³¨å†Œè‡ªå®šä¹‰ç»„ä»¶
  app.component('home', Home)
  app.component('readme', Readme)
  // 2.5 ä½¿ç”¨ vue-router
  app.use(router)

  // 3.1 ä½¿ç”¨ element-ui ç»„ä»¶
  app.use(ElementPlus)
  // 3.2 æ³¨å†Œ element-ui ä¸­çš„å›¾æ ‡ç»„ä»¶
  for (const [key, component] of Object.entries(ElementPlusIconsVue)) {
    app.component(key, component)
  }

  // 4. å°† vue åº”ç”¨å®ä¾‹æŒ‚è½½åˆ°é¡µé¢èŠ‚ç‚¹ä¸Š
  app.mount('#app')
</script>

<style>
body,
div {
  padding: 0;
  margin: 0;
}

.layout {
  height: 100vh;
  background: #F5F7F7;
}

.layout .el-aside .el-scrollbar,
.layout .el-aside .el-scrollbar__view,
.layout .el-menu {
  height: 100%;
}

.layout .el-header {
  background: #FFF;
  border-bottom: 1px solid #EEE;
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 13px;
}

.layout .el-main {
  padding: 0;
}

.layout .el-main .el-scrollbar .el-scrollbar__view {
  padding: 20px;
}
</style>